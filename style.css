:root{
  --bg:#f8fafc;
  --card:#ffffff;
  --text:#0f172a;
  --muted:#64748b;
  --border:#e2e8f0;
  --primary:#3b82f6;
  --danger:#ef4444;
  --ok:#22c55e;
  --warn:#f59e0b;
  --pending:#ffffff;
  --radius:16px;
  --shadow:0 1px 3px rgba(0,0,0,.06), 0 1px 2px rgba(0,0,0,.04);
  --shadow-lg:0 10px 15px -3px rgba(0,0,0,.08), 0 4px 6px -2px rgba(0,0,0,.04);
}

*{box-sizing:border-box}
html,body{height:100%;margin:0;padding:0}
body{background:var(--bg);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;line-height:1.6}

.toast{position:fixed;left:50%;transform:translateX(-50%);top:20px;background:var(--card);border:2px solid var(--primary);padding:16px 24px;border-radius:var(--radius);z-index:1001;max-width:90%;box-shadow:var(--shadow-lg);color:var(--text);font-weight:600}
.hidden{display:none!important}

.tabs{display:flex;gap:0;padding:0;border-bottom:2px solid var(--border);background:var(--card);position:sticky;top:0;z-index:100;box-shadow:var(--shadow)}
.tab-btn{flex:1;padding:16px 12px;border:none;border-bottom:3px solid transparent;background:transparent;color:var(--muted);cursor:pointer;font-size:14px;font-weight:600;transition:all .2s;display:flex;flex-direction:column;align-items:center;gap:4px}
.tab-btn .tab-icon{font-size:20px}
.tab-btn.active{color:var(--primary);border-bottom-color:var(--primary);background:linear-gradient(to bottom, transparent, rgba(59,130,246,.05))}

main{padding:20px;max-width:1400px;margin:0 auto;padding-bottom:100px}
.tab{display:none}
.tab.active{display:block}

.card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:24px;margin-bottom:20px;box-shadow:var(--shadow)}
.card h2{margin:0 0 20px 0;font-size:22px;color:var(--text);font-weight:700}
.card h3{margin:0 0 16px 0;font-size:18px;color:var(--text);font-weight:600}
.card h4{margin:0 0 16px 0;font-size:16px;color:var(--text);font-weight:600}

.add-card{border:2px dashed var(--border);background:var(--bg)}
.add-item-card{border:2px dashed var(--border);background:var(--bg);padding:20px;margin-bottom:20px}

.row{display:flex;gap:12px;align-items:center;flex-wrap:wrap;margin:12px 0}
.form-row{display:flex;gap:12px;margin-bottom:12px}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:16px;margin-bottom:20px}
.list{display:flex;flex-direction:column;gap:16px}
.form-group{display:flex;gap:12px;align-items:stretch;flex-wrap:wrap}
.form-group input{flex:1;min-width:200px}
.form-group label{display:block;margin-bottom:8px;color:var(--muted);font-size:14px;font-weight:500}
.filters{display:flex;gap:12px;flex-wrap:wrap;margin:16px 0}

input,textarea,select{background:var(--card);border:2px solid var(--border);color:var(--text);padding:12px 16px;border-radius:12px;font-size:15px;transition:all .2s;font-family:inherit}
input:focus,textarea:focus,select:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(59,130,246,.1)}
textarea{min-height:90px;resize:vertical;width:100%}
input[type="checkbox"]{width:auto;margin-right:8px}

.btn{background:var(--card);color:var(--text);border:2px solid var(--border);border-radius:12px;padding:12px 24px;cursor:pointer;font-size:15px;font-weight:600;transition:all .2s;box-shadow:var(--shadow)}
.btn:hover{transform:translateY(-1px);box-shadow:var(--shadow-lg)}
.btn:active{transform:translateY(0)}
.btn.primary{background:var(--primary);border-color:var(--primary);color:#fff}
.btn.danger{background:var(--danger);border-color:var(--danger);color:#fff}
.btn.warn{background:var(--warn);border-color:var(--warn);color:#fff}
.btn.ok{background:var(--ok);border-color:var(--ok);color:#fff}
.btn.small{padding:8px 16px;font-size:14px}

.badge{display:inline-block;padding:6px 14px;border-radius:999px;font-size:13px;font-weight:700;letter-spacing:0.3px}
.badge.open{background:#dcfce7;color:#166534;border:2px solid #22c55e}
.badge.closed{background:#f1f5f9;color:#475569;border:2px solid #cbd5e1}
.badge.has-pending{background:#fef3c7;color:#92400e;border:2px solid #f59e0b}

.table-card{position:relative;transition:all .2s}
.table-card.has-pending-orders{border:3px solid var(--warn);box-shadow:0 0 0 3px rgba(245,158,11,.15)}
.table-header{cursor:pointer;transition:color .2s}
.table-header:hover{color:var(--primary)}
.table-timer{color:var(--muted);font-size:14px;margin-top:8px;font-weight:500}

.order-card{position:relative;border-radius:var(--radius);padding:20px;margin-bottom:16px;background:var(--card);box-shadow:var(--shadow)}
.order-card.pending{border-left:5px solid var(--warn)}
.order-card.servito{border-left:5px solid var(--ok)}
.order-card.annullato{border-left:5px solid var(--danger)}
.order-card .order-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;flex-wrap:wrap;gap:8px}
.order-card .order-header strong{font-size:18px}
.order-card .order-items{background:var(--bg);border-radius:12px;padding:16px;margin:12px 0;font-size:15px;line-height:1.8;border:1px solid var(--border)}
.order-card .order-actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:16px}

/* MENU REDESIGN */
.menu-section{margin:32px 0;padding:24px 0;border-bottom:2px solid var(--border)}
.menu-section:last-child{border-bottom:none}

.categories-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:16px;margin-top:20px}
.category-card{background:var(--card);border:2px solid var(--border);border-radius:12px;padding:20px;transition:all .2s;cursor:pointer}
.category-card:hover{box-shadow:var(--shadow-lg);border-color:var(--primary)}
.category-card.active{border-color:var(--primary);background:rgba(59,130,246,.05)}
.category-card .category-name{font-size:18px;font-weight:700;margin-bottom:12px;color:var(--text)}
.category-card .category-actions{display:flex;gap:8px}

.items-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px;margin-top:20px}
.item-card{background:var(--card);border:2px solid var(--border);border-radius:12px;padding:20px;transition:all .2s}
.item-card:hover{box-shadow:var(--shadow-lg)}
.item-card .item-header{display:flex;justify-content:space-between;align-items:start;margin-bottom:12px}
.item-card .item-name{font-size:16px;font-weight:700;color:var(--text);flex:1}
.item-card .item-price{font-size:18px;font-weight:900;color:var(--primary);white-space:nowrap;margin-left:12px}
.item-card .item-description{color:var(--muted);font-size:14px;margin-bottom:8px;line-height:1.5}
.item-card .item-tags{display:flex;gap:6px;margin-bottom:12px;flex-wrap:wrap}
.item-card .item-tag{background:var(--bg);padding:4px 10px;border-radius:6px;font-size:12px;font-weight:600;color:var(--muted)}
.item-card .item-status{font-size:13px;color:var(--muted);margin-bottom:12px}
.item-card .item-actions{display:flex;gap:8px}

.modal{position:fixed;inset:0;background:rgba(15,23,42,.75);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;padding:20px;z-index:1000}
.modal-content{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:32px;max-width:600px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:var(--shadow-lg)}
.modal-content.pin{text-align:center}
.pin-digits{font-size:clamp(48px,12vw,72px);font-weight:900;letter-spacing:clamp(8px,2vw,16px);background:linear-gradient(135deg, #3b82f6, #1d4ed8);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;padding:24px;margin:24px auto;user-select:all}

.qr-box{display:flex;align-items:center;justify-content:center;min-height:280px;padding:16px}
.chart-box{position:relative;height:320px}
.charts-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:20px}

.hint{color:var(--muted);font-size:14px;margin:8px 0}

/* KPI Stats */
.stats-kpi{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:16px;
  margin:24px 0;
}
.kpi-card{
  background:linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
  border-radius:var(--radius);
  padding:24px;
  text-align:center;
  box-shadow:var(--shadow-lg);
  color:#fff;
}
.kpi-value{
  font-size:clamp(28px,5vw,40px);
  font-weight:900;
  margin-bottom:8px;
  letter-spacing:-0.5px;
}
.kpi-label{
  font-size:14px;
  opacity:0.9;
  font-weight:600;
}

/* Modal lista prodotti */
#allProductsModal .product-list,
#sessionSummaryModal .product-list{
  max-height:60vh;
  overflow-y:auto;
}
#allProductsModal .product-item,
#sessionSummaryModal .product-item{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:16px;
  border-bottom:1px solid var(--border);
  font-size:15px;
}
#allProductsModal .product-item:last-child,
#sessionSummaryModal .product-item:last-child{border-bottom:none}
#allProductsModal .product-name,
#sessionSummaryModal .product-name{font-weight:600;flex:1}
#allProductsModal .product-qty,
#sessionSummaryModal .product-qty{color:var(--muted);margin:0 16px}
#allProductsModal .product-revenue,
#sessionSummaryModal .product-revenue{font-weight:700;color:var(--primary)}

@media (max-width: 768px){
  .tabs{position:fixed;bottom:0;left:0;right:0;border-top:2px solid var(--border);border-bottom:none;z-index:100;background:var(--card)}
  .tab-btn{font-size:12px}
  .tab-btn .tab-icon{font-size:22px}
  .categories-grid,.items-grid{grid-template-columns:1fr}
  .grid{grid-template-columns:1fr}
  .charts-grid{grid-template-columns:1fr}
  main{padding-bottom:100px}
}
